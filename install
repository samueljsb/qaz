#! /bin/sh
#
# This installs qaz.

set -e

message() {
    echo "\033[1m[QAZ]\033[0m $@"
}

QAZ=$(pwd)/$(dirname "$0")

message 'Installing dotfiles and management tool...'

# Install management tool
message "Installing qaz management tool..."
python3 -m venv $QAZ/.venv
$QAZ/.venv/bin/python -m pip install --upgrade pip
$QAZ/.venv/bin/python -m pip install $QAZ
sudo ln -sf $QAZ/.venv/bin/qaz /usr/local/bin
message "... management tool installed!"

# Run management tool to install basics
mkdir -p $HOME/.config
$QAZ/.venv/bin/qaz setup $QAZ

# Install zsh and set as default shell
$QAZ/.venv/bin/qaz install zsh
